# üîê –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø –ê–£–¢–ï–ù–¢–ò–§–ò–ö–ê–¶–ò–ò –ó–ê–í–ï–†–®–ï–ù–ê!

## ‚úÖ –ß–¢–û –í–´–ü–û–õ–ù–ï–ù–û

### 1. **–ò–∑—É—á–µ–Ω—ã –º–æ–¥–µ–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è** üì±
- ‚úÖ **AuthCredentials** - –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Ö–æ–¥–∞ (phoneNumber, password)
- ‚úÖ **RegistrationData** - –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (phoneNumber, password, name, email)
- ‚úÖ **User** - –º–æ–¥–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –ø–æ–ª—è–º–∏ (id, username, fullName, email, avatar, etc.)

### 2. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã API –º–æ–¥–µ–ª–∏** üîó
- ‚úÖ **LoginRequest** - —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç AuthCredentials
- ‚úÖ **RegisterRequest** - —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç RegistrationData  
- ‚úÖ **UserAPI** - API –º–æ–¥–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ **AuthResponse** - –æ—Ç–≤–µ—Ç —Å —Ç–æ–∫–µ–Ω–∞–º–∏ –∏ –¥–∞–Ω–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### 3. **–û–±–Ω–æ–≤–ª–µ–Ω AuthService** ‚öôÔ∏è
- ‚úÖ **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è** - —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ API
- ‚úÖ **–í—Ö–æ–¥** - —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ API
- ‚úÖ **–í—ã—Ö–æ–¥** - —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ API —Å –æ—Ç–ø—Ä–∞–≤–∫–æ–π –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- ‚úÖ **–¢–æ–∫–µ–Ω—ã** - –¥–æ–±–∞–≤–ª–µ–Ω–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ JWT —Ç–æ–∫–µ–Ω–∞–º–∏
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—Ö–æ–¥** - –∑–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ

---

## üîß –û–ë–ù–û–í–õ–ï–ù–ù–´–ï –ú–ï–¢–û–î–´

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è:
```swift
func register(with data: RegistrationData) async {
    // –°–æ–∑–¥–∞–µ—Ç RegisterRequest
    // –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ /api/auth/register
    // –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–æ–∫–µ–Ω—ã –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    // –û–±–Ω–æ–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ isAuthenticated
}
```

### –í—Ö–æ–¥:
```swift
func login(with credentials: AuthCredentials) async {
    // –°–æ–∑–¥–∞–µ—Ç LoginRequest
    // –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ /api/auth/login
    // –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–æ–∫–µ–Ω—ã –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    // –û–±–Ω–æ–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ isAuthenticated
}
```

### –í—ã—Ö–æ–¥:
```swift
func logout() async {
    // –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ /api/auth/logout
    // –û—á–∏—â–∞–µ—Ç –≤—Å–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
    // –£–¥–∞–ª—è–µ—Ç —Ç–æ–∫–µ–Ω—ã –∏–∑ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
}
```

---

## üîê –£–ü–†–ê–í–õ–ï–ù–ò–ï –¢–û–ö–ï–ù–ê–ú–ò

### –ù–æ–≤—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞:
- ‚úÖ `accessToken: String?` - JWT —Ç–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞
- ‚úÖ `refreshToken: String?` - —Ç–æ–∫–µ–Ω –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- ‚úÖ `cancellables: Set<AnyCancellable>` - –¥–ª—è Combine

### –ù–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã:
- ‚úÖ `loadTokensFromStorage()` - –∑–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
- ‚úÖ `saveTokens(token:refreshToken:)` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤
- ‚úÖ `refreshAccessToken()` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
- ‚úÖ `updateProfile(_:)` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è —á–µ—Ä–µ–∑ API

---

## üì± –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø –° UI

### –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—ã–∑–æ–≤—ã:
- ‚úÖ **ProfileComponents.swift** - `logout()` —Ç–µ–ø–µ—Ä—å async
- ‚úÖ **AuthView** - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–º AuthService
- ‚úÖ **LoginFormView** - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å API
- ‚úÖ **RegistrationFormView** - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å API

### –°–æ—Å—Ç–æ—è–Ω–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞:
- ‚úÖ **–ó–∞–≥—Ä—É–∑–∫–∞** - `isLoading` –≤–æ –≤—Ä–µ–º—è API –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ **–û—à–∏–±–∫–∏** - `errorMessage` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—à–∏–±–æ–∫
- ‚úÖ **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** - `isAuthenticated` –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤—Ö–æ–¥–∞

---

## üöÄ –†–ê–ë–û–¢–ê–Æ–©–ò–ï –≠–ù–î–ü–û–ò–ù–¢–´

### –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:
- ‚úÖ **POST** `/api/auth/register` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- ‚úÖ **POST** `/api/auth/login` - –≤—Ö–æ–¥
- ‚úÖ **POST** `/api/auth/logout` - –≤—ã—Ö–æ–¥
- ‚úÖ **POST** `/api/auth/refresh` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
- ‚úÖ **GET** `/api/auth/profile` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
- ‚úÖ **PUT** `/api/auth/profile` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è

### –í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:
- ‚úÖ **AuthService.register()** - –≤—ã–∑—ã–≤–∞–µ—Ç API —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- ‚úÖ **AuthService.login()** - –≤—ã–∑—ã–≤–∞–µ—Ç API –≤—Ö–æ–¥–∞
- ‚úÖ **AuthService.logout()** - –≤—ã–∑—ã–≤–∞–µ—Ç API –≤—ã—Ö–æ–¥–∞
- ‚úÖ **AuthService.refreshAccessToken()** - –æ–±–Ω–æ–≤–ª—è–µ—Ç —Ç–æ–∫–µ–Ω
- ‚úÖ **AuthService.updateProfile()** - –æ–±–Ω–æ–≤–ª—è–µ—Ç –ø—Ä–æ—Ñ–∏–ª—å

---

## üîí –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:
- ‚úÖ **JWT —Ç–æ–∫–µ–Ω—ã** - access –∏ refresh —Ç–æ–∫–µ–Ω—ã
- ‚úÖ **–•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π** - –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —á–µ—Ä–µ–∑ bcrypt
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤** - –ø—Ä–∏ –∏—Å—Ç–µ—á–µ–Ω–∏–∏
- ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ** - —Ç–æ–∫–µ–Ω—ã –≤ UserDefaults
- ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** - –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –∏ —Å–µ—Ä–≤–µ—Ä–µ

### –ü–æ—Ç–æ–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:
- ‚úÖ **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è** ‚Üí —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª—è ‚Üí —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤
- ‚úÖ **–í—Ö–æ–¥** ‚Üí –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–æ–ª—è ‚Üí –≤—ã–¥–∞—á–∞ —Ç–æ–∫–µ–Ω–æ–≤
- ‚úÖ **–í—ã—Ö–æ–¥** ‚Üí –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤ ‚Üí –æ—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ** ‚Üí –ø—Ä–æ–≤–µ—Ä–∫–∞ refresh —Ç–æ–∫–µ–Ω–∞ ‚Üí –Ω–æ–≤—ã–µ —Ç–æ–∫–µ–Ω—ã

---

## üìã –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é:
1. ‚úÖ **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**
2. ‚úÖ **–í—Ö–æ–¥ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏**
3. ‚úÖ **–í—Ö–æ–¥ —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏**
4. ‚úÖ **–í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã**
5. ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—Ö–æ–¥ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ**
6. ‚úÖ **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤**

### –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ:
```json
{
  "phoneNumber": "+79991234567",
  "password": "password123",
  "fullName": "–¢–µ—Å—Ç–æ–≤—ã–π –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å",
  "email": "test@example.com"
}
```

---

## üéØ –°–¢–ê–¢–£–°

**‚úÖ –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø –ó–ê–í–ï–†–®–ï–ù–ê!**

- –í—Å–µ –º–æ–¥–µ–ª–∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã —Å API
- AuthService —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º–∏
- –¢–æ–∫–µ–Ω—ã —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞

**–ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏!** üöÄ

---

## üöÄ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

1. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏** - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –≤—Ö–æ–¥, –≤—ã—Ö–æ–¥
2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—Ö–æ–¥** - –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤** - –ø—Ä–∏ –∏—Å—Ç–µ—á–µ–Ω–∏–∏
4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫** - —Å–µ—Ç—å, –Ω–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
5. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å UX** - –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∑–∞–≥—Ä—É–∑–∫–∏, —Å–æ–æ–±—â–µ–Ω–∏—è

**–í—Å–µ –≥–æ—Ç–æ–≤–æ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è!** üéâ